# Java 基本数据

Java 中有 8 种基本数据类型，分别为：`byte`、`short`、`int`、`long`、`float`、`double`、`char`、`boolean`。

| 基本类型  | 位数 | 字节 | 默认值  | 取值范围                                                     |
| :-------- | :--- | :--- | :------ | ------------------------------------------------------------ |
| `byte`    | 8    | 1    | 0       | -128 ~ 127                                                   |
| `short`   | 16   | 2    | 0       | -32768（-2^15） ~ 32767（2^15 - 1）                          |
| `int`     | 32   | 4    | 0       | -2147483648 ~ 2147483647                                     |
| `long`    | 64   | 8    | 0L      | -9223372036854775808（-2^63） ~ 9223372036854775807（2^63 -1） |
| `char`    | 16   | 2    | 'u0000' | 0 ~ 65535（2^16 - 1）                                        |
| `float`   | 32   | 4    | 0f      | 1.4E-45 ~ 3.4028235E38                                       |
| `double`  | 64   | 8    | 0d      | 4.9E-324 ~ 1.7976931348623157E308                            |
| `boolean` | 1    |      | false   | true、false                                                  |

# 基本类型和包装类型的区别

- **用途**：除了定义一些常量和局部变量之外，我们在其他地方比如方法参数、对象属性中很少会使用基本类型来定义变量。并且，包装类型可用于泛型，而基本类型不可以。
- **存储方式**：基本数据类型的局部变量存放在 Java 虚拟机栈中的局部变量表中，基本数据类型的成员变量（未被 `static` 修饰 ）存放在 Java 虚拟机的堆中。包装类型属于对象类型，我们知道几乎所有对象实例都存在于堆中。
- **占用空间**：相比于包装类型（对象类型）， 基本数据类型占用的空间往往非常小。
- **默认值**：成员变量包装类型不赋值就是 `null` ，而基本类型有默认值且不是 `null`。
- **比较方式**：对于基本数据类型来说，`==` 比较的是值。对于包装数据类型来说，`==` 比较的是对象的内存地址。所有整型包装类对象之间值的比较，全部使用 `equals()` 方法。

# 包装类型的缓存机制

Java 基本数据类型的包装类型的大部分都用到了缓存机制来提升性能。

`Byte`,`Short`,`Integer`,`Long` 这 4 种包装类默认创建了数值 **[-128，127]** 的相应类型的缓存数据，`Character` 创建了数值在 **[0,127]** 范围的缓存数据，`Boolean` 直接返回 `TRUE` or `FALSE`。

对于 `Integer`，可以通过 JVM 参数 `-XX:AutoBoxCacheMax=<size>` 修改缓存上限，但不能修改下限 -128。实际使用时，并不建议设置过大的值，避免浪费内存，甚至是 OOM。

对于`Byte`,`Short`,`Long` ,`Character` 没有类似 `-XX:AutoBoxCacheMax` 参数可以修改，因此缓存范围是固定的，无法通过 JVM 参数调整。`Boolean` 则直接返回预定义的 `TRUE` 和 `FALSE` 实例，没有缓存范围的概念。



# 自动装箱与自动拆箱



# ==和equal的区别

在Java中，`==` 和 `equals()` 是用来比较对象是否相等的，但它们在使用和行为上有明显的区别：

1. ==操作符
用于比较两个对象的内存地址是否相等（引用类型）或者值是否相等。

```java
int a = 1;
int b = 1;
System.out.println(a == b) // 基本类型是直接比较值

String s1 = new String("hello");
String s2 = new String("hello");
System.out.println(s1 == s2); // 两个对象的地址不同
```

2. equal()方法
默认情况下与==操作符相同，但是如果类重写该方法，大部分是比较内容是否一致（如String类）。

```java
String s1 = new String("hello");
String s2 = new String("hello");
System.out.println(s1.equal(s2)); // 两个对象的地址不同
```

| **场景**         | `==`                       | `equals()`                   |
| :--------------- | :------------------------- | :--------------------------- |
| **基本数据类型** | 比较值                     | 不可用（基本类型不是对象）   |
| **引用类型**     | 比较内存地址是否相同       | 默认比较地址，重写后比较内容 |
| **字符串比较**   | 常量池优化可能相等，否则不 | 总是比较内容（推荐用法）     |



# Java 字节码

Java字节码是Java虚拟机（JVM）执行的中间代码，由Java源代码编译生成，具有跨平台性和高效性。

Java源文件（`.java`）通过`javac`编译器编译为字节码文件（`.class`），其中字节码文件包含类、方法、字段等元数据。字节码由JVM解释执行或通过即时编译器（JIT）转换为本地机器码，实现跨平台兼容。

![Java程序转变为机器代码的过程](https://oss.javaguide.cn/github/javaguide/java/basis/java-code-to-machine-code.png)

