# 1 Java中String设计为什么是不可变

1. **性能**：String对象的池化是性能的重要保证。由于String对象在String池中缓存，多个客户之间共享这些对象。如果String是可变的，那么一个客户的操作可能会影响所有其他客户，导致数据的不一致性。例如，如果一段代码将String "Test" 的值更改为 "TEST"，则所有其他客户也将看到该值，这显然是不期望的行为。

2. **安全性**：String类的不可变性保证了其内容的稳定性，避免了因外部操作导致的不可预期的变化，从而提高了程序的安全性。

3. **散列值**：由于HashMap的工作原理是散列，因此需要具有相同的值才能正常运行。如果String是可变的，那么在插入和检索时可能会生成两个不同的哈希码，导致丢失Map中的值对象。

4. **设计决策**：String类被声明为final，这意味着它不能被继承，从而保证了其不可变性。此外，String类的底层字符数组也被声明为final，这进一步保证了String对象的内容不可变。

总的来说，String的不可变性是出于性能、安全性、散列值计算和设计决策等多方面的考虑。

